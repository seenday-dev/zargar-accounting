<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ³Øª ÙÙˆÙ†Øª ÛŒÚ©Ø§Ù† Ùˆ AJAX</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/yekan-font@1.0.0/css/yekan-font.min.css">
    <style>
        * {
            font-family: 'yekan', 'Tahoma', 'Arial', sans-serif !important;
        }
        
        body {
            padding: 20px;
            background: #f5f5f5;
        }
        
        .test-box {
            background: white;
            padding: 20px;
            margin: 10px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        h1, h2, h3 {
            margin-bottom: 10px;
        }
        
        .status {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 4px;
            margin: 5px;
        }
        
        .success {
            background: #10b981;
            color: white;
        }
        
        .error {
            background: #ef4444;
            color: white;
        }
        
        .info {
            background: #3b82f6;
            color: white;
        }
        
        pre {
            background: #1a1a1a;
            color: #00ff00;
            padding: 15px;
            border-radius: 4px;
            overflow-x: auto;
            font-family: 'Courier New', monospace !important;
        }
        
        button {
            background: #000;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        
        button:hover {
            background: #333;
        }
    </style>
</head>
<body>
    <div class="test-box">
        <h1>ğŸ§ª ØªØ³Øª Ø³ÛŒØ³ØªÙ… Ù„Ø§Ú¯ Ø­Ø³Ø§Ø¨Ø¯Ø§Ø±ÛŒ Ø²Ø±Ú¯Ø±</h1>
        <p>Ø§ÛŒÙ† ØµÙØ­Ù‡ Ø¨Ø±Ø§ÛŒ ØªØ³Øª ÙÙˆÙ†Øª ÛŒÚ©Ø§Ù† Ùˆ Ø¹Ù…Ù„Ú©Ø±Ø¯ AJAX Ø·Ø±Ø§Ø­ÛŒ Ø´Ø¯Ù‡ Ø§Ø³Øª.</p>
    </div>

    <div class="test-box">
        <h2>1ï¸âƒ£ ØªØ³Øª ÙÙˆÙ†Øª ÛŒÚ©Ø§Ù†</h2>
        <p>Ø§ÛŒÙ† Ù…ØªÙ† Ø¨Ø§ÛŒØ¯ Ø¨Ø§ ÙÙˆÙ†Øª ÛŒÚ©Ø§Ù† Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ø´ÙˆØ¯.</p>
        <p>Ø§Ø¹Ø¯Ø§Ø¯ ÙØ§Ø±Ø³ÛŒ: Û° Û± Û² Û³ Û´ Ûµ Û¶ Û· Û¸ Û¹</p>
        <p>Ø§Ø¹Ø¯Ø§Ø¯ Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ: 0 1 2 3 4 5 6 7 8 9</p>
        <p>Ø­Ø±ÙˆÙ: Ø¢ Ø§ Ø¨ Ù¾ Øª Ø« Ø¬ Ú† Ø­ Ø® Ø¯ Ø° Ø± Ø² Ú˜ Ø³ Ø´ Øµ Ø¶ Ø· Ø¸ Ø¹ Øº Ù Ù‚ Ú© Ú¯ Ù„ Ù… Ù† Ùˆ Ù‡ ÛŒ</p>
        <div id="font-test-result"></div>
    </div>

    <div class="test-box">
        <h2>2ï¸âƒ£ ØªØ³Øª Ø³Ø§Ø®ØªØ§Ø± Ù„Ø§Ú¯â€ŒÙ‡Ø§</h2>
        <button onclick="checkLogStructure()">Ø¨Ø±Ø±Ø³ÛŒ Ø³Ø§Ø®ØªØ§Ø±</button>
        <div id="structure-result"></div>
    </div>

    <div class="test-box">
        <h2>3ï¸âƒ£ ØªØ³Øª Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ</h2>
        <button onclick="generateTestLogs()">Ø§ÛŒØ¬Ø§Ø¯ Ù„Ø§Ú¯â€ŒÙ‡Ø§ÛŒ ØªØ³ØªÛŒ</button>
        <div id="generate-result"></div>
    </div>

    <div class="test-box">
        <h2>4ï¸âƒ£ Ø®Ù„Ø§ØµÙ‡ ÙˆØ¶Ø¹ÛŒØª</h2>
        <div id="summary">
            <span class="status info">ğŸ“¦ Ù…Ø­ØµÙˆÙ„Ø§Øª: Ø¨Ø±Ø±Ø³ÛŒ Ù†Ø´Ø¯Ù‡</span>
            <span class="status info">ğŸ’° ÙØ±ÙˆØ´: Ø¨Ø±Ø±Ø³ÛŒ Ù†Ø´Ø¯Ù‡</span>
            <span class="status info">ğŸ’µ Ù‚ÛŒÙ…Øª: Ø¨Ø±Ø±Ø³ÛŒ Ù†Ø´Ø¯Ù‡</span>
            <span class="status info">âš ï¸ Ø®Ø·Ø§Ù‡Ø§: Ø¨Ø±Ø±Ø³ÛŒ Ù†Ø´Ø¯Ù‡</span>
        </div>
    </div>

    <div class="test-box">
        <h2>ğŸ“ Ù„Ø§Ú¯ Ú©Ù†Ø³ÙˆÙ„</h2>
        <pre id="console-log">Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± Ø¹Ù…Ù„ÛŒØ§Øª...</pre>
    </div>

    <script>
        function log(message) {
            const consoleLog = document.getElementById('console-log');
            const timestamp = new Date().toLocaleTimeString('fa-IR');
            consoleLog.textContent += `\n[${timestamp}] ${message}`;
            consoleLog.scrollTop = consoleLog.scrollHeight;
        }

        // Test 1: Font
        window.addEventListener('load', function() {
            const element = document.querySelector('h1');
            const fontFamily = window.getComputedStyle(element).fontFamily;
            const result = document.getElementById('font-test-result');
            
            log('ØªØ³Øª ÙÙˆÙ†Øª: ' + fontFamily);
            
            if (fontFamily.includes('yekan') || fontFamily.includes('Yekan')) {
                result.innerHTML = '<span class="status success">âœ… ÙÙˆÙ†Øª ÛŒÚ©Ø§Ù† Ø§Ø¹Ù…Ø§Ù„ Ø´Ø¯Ù‡</span>';
                log('âœ… ÙÙˆÙ†Øª ÛŒÚ©Ø§Ù† Ø¨Ù‡ Ø¯Ø±Ø³ØªÛŒ Ù„ÙˆØ¯ Ø´Ø¯');
            } else {
                result.innerHTML = '<span class="status error">âŒ ÙÙˆÙ†Øª ÛŒÚ©Ø§Ù† Ø§Ø¹Ù…Ø§Ù„ Ù†Ø´Ø¯Ù‡</span>';
                log('âŒ ÙÙˆÙ†Øª ÛŒÚ©Ø§Ù† Ù„ÙˆØ¯ Ù†Ø´Ø¯: ' + fontFamily);
            }
        });

        // Test 2: Structure
        function checkLogStructure() {
            log('Ø´Ø±ÙˆØ¹ Ø¨Ø±Ø±Ø³ÛŒ Ø³Ø§Ø®ØªØ§Ø±...');
            const result = document.getElementById('structure-result');
            result.innerHTML = '<p>Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø±Ø±Ø³ÛŒ...</p>';

            fetch('<?php echo __DIR__; ?>/check-structure.php')
                .then(response => response.json())
                .then(data => {
                    log('Ø³Ø§Ø®ØªØ§Ø± Ø¨Ø±Ø±Ø³ÛŒ Ø´Ø¯: ' + JSON.stringify(data));
                    let html = '<ul style="list-style: none; padding: 0;">';
                    
                    ['product', 'sales', 'price', 'error', 'general'].forEach(channel => {
                        const exists = data.channels && data.channels[channel];
                        const icon = exists ? 'âœ…' : 'âŒ';
                        const status = exists ? 'success' : 'error';
                        html += `<li><span class="status ${status}">${icon} ${channel}</span></li>`;
                    });
                    
                    html += '</ul>';
                    result.innerHTML = html;
                })
                .catch(error => {
                    log('âŒ Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø±Ø±Ø³ÛŒ: ' + error.message);
                    result.innerHTML = '<span class="status error">Ø®Ø·Ø§: ' + error.message + '</span>';
                });
        }

        // Test 3: Generate
        function generateTestLogs() {
            log('Ø´Ø±ÙˆØ¹ Ø§ÛŒØ¬Ø§Ø¯ Ù„Ø§Ú¯â€ŒÙ‡Ø§ÛŒ ØªØ³ØªÛŒ...');
            const result = document.getElementById('generate-result');
            result.innerHTML = '<p>Ø¯Ø± Ø­Ø§Ù„ Ø§ÛŒØ¬Ø§Ø¯...</p>';

            fetch('generate-test-logs.php')
                .then(response => response.text())
                .then(data => {
                    log('Ù„Ø§Ú¯â€ŒÙ‡Ø§ÛŒ ØªØ³ØªÛŒ Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯Ù†Ø¯');
                    result.innerHTML = '<pre>' + data + '</pre>';
                    updateSummary();
                })
                .catch(error => {
                    log('âŒ Ø®Ø·Ø§: ' + error.message);
                    result.innerHTML = '<span class="status error">Ø®Ø·Ø§: ' + error.message + '</span>';
                });
        }

        // Update summary
        function updateSummary() {
            log('Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø®Ù„Ø§ØµÙ‡...');
            // Ø§ÛŒÙ† Ù‚Ø³Ù…Øª Ø¯Ø± WordPress Ø¨Ø§ AJAX ÙˆØ§Ù‚Ø¹ÛŒ Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ø¯
            const summary = document.getElementById('summary');
            summary.innerHTML = `
                <span class="status success">ğŸ“¦ Ù…Ø­ØµÙˆÙ„Ø§Øª: 10 Ù„Ø§Ú¯</span>
                <span class="status success">ğŸ’° ÙØ±ÙˆØ´: 18 Ù„Ø§Ú¯</span>
                <span class="status success">ğŸ’µ Ù‚ÛŒÙ…Øª: 18 Ù„Ø§Ú¯</span>
                <span class="status success">âš ï¸ Ø®Ø·Ø§Ù‡Ø§: 18 Ù„Ø§Ú¯</span>
            `;
        }

        log('ØµÙØ­Ù‡ ØªØ³Øª Ø¢Ù…Ø§Ø¯Ù‡ Ø§Ø³Øª');
        log('Ø¨Ø±Ø§ÛŒ Ø´Ø±ÙˆØ¹ØŒ Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯');
    </script>
</body>
</html>
