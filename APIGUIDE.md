## راهنمای استفاده از `api-test.php`

این اسکریپت با ساختاری شی‌گرا و با استفاده از Guzzle نوشته شده است؛ کلاس `ZargarApiClient` مسئول ارتباط با سرویس است و کلاس `MadeGoldExporter` فرآیند واکشی و ذخیره محصولات را مدیریت می‌کند.

### پیش‌نیاز

```bash
composer install
```

### تنظیمات

مقادیر آی‌پی، پورت و اطلاعات ورود را داخل آرایه `$config` در فایل `api-test.php` تغییر دهید:

```php
$config = [
    'host' => '37.235.18.235',
    'port' => 8090,
    'username' => 'Service',
    'password' => 'Service',
];
```

### اجرا

```bash
php api-test.php
```

خروجی ابتدا `UserKey` را چاپ می‌کند و سپس در یک حلقه تمام صفحات سرویس `MadeGold/List` (لیست محصولات ساخته‌شده) را با `PageIndex` افزایشی و اندازه صفحه ۱۰۰ واکشی می‌کند. در هر صفحه، آدرس‌های مربوط به تصاویر (مثل `ImageURL1` و `DefaultImageURL`) به صورت کامل (`http://host:port/...`) ساخته می‌شوند. اگر پاسخ سرویس پیغام `Status: Error` با متن «خطا در خروجی خالی» داشته باشد، حلقه متوقف می‌شود. پس از تکمیل واکشی، فیلدهای همیشه خالی (مثل `ImageURL2-6`, `DesignerCode`, `SizeTitle`, ...) حذف می‌شوند و فایل نهایی `madegold-products.json` کنار اسکریپت ذخیره می‌شود؛ URLها با `JSON_UNESCAPED_SLASHES` ذخیره می‌شوند تا مانند `http://37.235...` قابل خواندن باشند. اگر خطایی رخ دهد پیام مناسب چاپ می‌شود.
